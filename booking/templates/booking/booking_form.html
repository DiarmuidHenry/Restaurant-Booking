{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Make a Reservation</title>
    <script src="{% static 'js/search.js' %}"></script>
</head>
<body>
    <h1>Make a Reservation</h1>
    <form method="post" action="{% url 'check_availability' %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Check Availability</button>
    </form>

    {% if available_tables %}
        <h2>Available Tables</h2>
        <ul>
            {% for table in available_tables %}
                <li>
                    Table {{ table.table_number }} ({{ table.capacity }} people)
                    <form method="post" action="{% url 'make_reservation' table.id %}">
                        {% csrf_token %}
                        <input type="hidden" name="reservation_date" value="{{ form.reservation_date.value }}">
                        <input type="hidden" name="reservation_time" value="{{ form.reservation_time.value }}">
                        <input type="hidden" name="reservation_length" value="{{ form.reservation_length.value }}">
                        <input type="hidden" name="customer_name" value="{{ form.customer_name.value }}">
                        <input type="hidden" name="number_of_guests" value="{{ form.number_of_guests.value }}">
                        <input type="hidden" name="table_location" value="{{ form.table_location.value }}">
                        <button type="submit">Reserve Table</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% endif %}
</body>
</html>
